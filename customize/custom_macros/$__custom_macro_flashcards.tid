created: 20220625191032461
creator: yuzijie
modified: 20230422135012232
modifier: yuzijie
tags: $:/tags/Macro customized
title: $:/custom/macro/flashcards
type: text/vnd.tiddlywiki

\define flashcard-border-style() border-top: 6px solid $(color)$;

\define flashcard()
<$set name="color" filter="[all[current]get[belongs.to]colorize[]]" emptyValue="#29B6F6" select="0">
<div class="tc-card" style=<<flashcard-border-style>>><div class="tc-card-content">
<$macrocall $name="l" title={{!!title}} note="no" style="display:block;"/>
<div class="tc-card-buttons"><$set name="up" filter="[all[current]get[level]add[1]]" select="0" emptyValue="1">
<$button set="!!date" setTo=<<now YYYY0MM0DD>> class="tc-btn-invisible">🙁<$action-setfield $field="last-date" $value={{!!date}}/><$action-setfield level="1"/></$button>
<$list filter="[belongs.to[Flashcard]level{!!level}]" emptyMessage="Level 0"><$button class="tc-btn-invisible">{{!!caption}}<$macrocall $name="tiddler-open" tiddler={{!!title}}/></$button></$list>
<$button set="!!date" setTo=<<now YYYY0MM0DD>> class="tc-btn-invisible">🙂<$action-setfield $field="last-date" $value={{!!date}}/><$action-setfield level=<<up>>/></$button>
</$set></div>
</div></div>
</$set>
\end

\define flashcards(level)
<div style="margin:2em 0;">
<$list filter="[tag[Flashcard]level[$level$]!days:date{Flashcard Level $level$!!interval}]"><<flashcard>></$list>
<$details summary="Hidden">
<$list filter="[tag[Flashcard]level[$level$]days:date{Flashcard Level $level$!!interval}]"><<flashcard>></$list>
</$details>
</div>
\end

\define flashcards-count(level) <$count filter="[tag[Flashcard]level[$level$]]"/>

# ''显示单个 Flashcard''
#> `<<flashcard>>`
# ''显示某个 Level 下所有的 Flashcards''
#> `<<flashcards
  level:"级别">>`
# ''显示某个 Level 下的 Flashcards 的数量''
#> `<<flashcards-count
  level:"级别">>`